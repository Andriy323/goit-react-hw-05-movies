{"version":3,"file":"static/js/845.926a3b25.chunk.js","mappings":"0RACA,EAAuB,sBAAvB,EAAoD,sBAApD,EAAkF,uBAAlF,EAAoH,0B,2BCyDpH,EAlDgB,WACd,OAA0BA,EAAAA,EAAAA,UAAS,CACjCC,KAAM,GACNC,QAAQ,IAFV,eAAOC,EAAP,KAAcC,EAAd,KAIA,GAA0BJ,EAAAA,EAAAA,WAAS,GAAnC,eAAOK,EAAP,KAAcC,EAAd,KACQC,GAAYC,EAAAA,EAAAA,MAAZD,QACFE,GAAWC,EAAAA,EAAAA,QAAO,OAExBC,EAAAA,EAAAA,YAAU,WACJN,IAAOO,EAAAA,EAAAA,GAAOH,EACnB,GAAE,CAACJ,KAEJM,EAAAA,EAAAA,YAAU,WACR,IAAME,EAAiB,mCAAG,sGAEtBT,GAAS,SAAAU,GAAI,yBAAUA,GAAV,IAAgBZ,QAAQ,GAAxB,IAFS,UAGIa,EAAAA,EAAAA,IAAgBR,GAHpB,gBAGdS,EAHc,EAGdA,QACRZ,GAAS,SAAAa,GACP,MAAO,CAAEA,UAAAA,EAAWhB,MAAK,OAAKe,GAC/B,IACDA,EAAQE,OAASZ,GAAS,GAAQa,EAAAA,GAAAA,QAAA,eAPZ,kDAStBA,EAAAA,GAAAA,MAAA,kEATsB,yBAatBf,GAAS,SAAAU,GAAI,yBAAUA,GAAV,IAAgBZ,QAAQ,GAAxB,IAbS,6EAAH,qDAgBvBW,GACD,GAAE,CAACN,IAEJ,IAAMa,EAAOjB,EAAMF,KAAKoB,KAAI,WAAkCC,GAAlC,IAAGC,EAAH,EAAGA,QAASC,EAAZ,EAAYA,OAAQC,EAApB,EAAoBA,WAApB,OAC1B,gBAAIC,UAAWC,EAAf,WACE,gBAAID,UAAWC,EAAf,qBACWH,EADX,YAC4B,IAAII,KAAKH,GAAYI,eAAgB,QAEjE,cAAGH,UAAWC,EAAd,SAA6BJ,MAJDD,EADJ,IAQ5B,OACE,iBAAKQ,IAAKrB,EAAV,UACGN,EAAMD,SAAU,SAAC6B,EAAA,EAAD,KACjB,SAAC,KAAD,KACA,eAAIL,UAAWC,EAAf,SAA0BP,MAG/B,C,sDCxDM,IAAMR,EAAS,SAAAkB,GACpBA,EAAIE,QAAQC,eAAe,CAAEC,MAAO,QAASC,SAAU,UACxD,C,8MCEKC,E,OAAWC,EAAAA,OAAa,CAC5BC,QAAS,gCACTC,OAAQ,CACNC,QAL0BC,sCASjBC,EAAgB,mCAAG,WAAMC,GAAN,yFACPP,EAASQ,IAAI,uBADN,uBACtB3C,EADsB,EACtBA,KADsB,kBAEvBA,GAFuB,2CAAH,sDAKhB4C,EAAU,mCAAG,WAAOC,GAAP,8FAAWC,EAAX,+BAAkB,QAAlB,SACDX,EAASQ,IAAT,iBAAuBE,GAAM,CAClDP,OAAQ,CAAES,SAAUD,KAFE,uBAChB9C,EADgB,EAChBA,KADgB,kBAKjBA,GALiB,2CAAH,sDAQVgD,EAAc,mCAAG,WAAMH,GAAN,oFACtBI,EAAKL,EAAWC,EAAI,SACpBK,EAAKN,EAAWC,EAAI,SACpBM,EAAKP,EAAWC,EAAI,SAEpB7C,EAAOoD,QAAQC,IAAI,CAACJ,EAAIC,EAAIC,IAC/BG,MAAK,SAAAC,GAEJ,OADkBA,EAAMC,MAAK,SAAArC,GAAI,OAAIA,EAAKsC,QAAT,GAElC,IACAC,OAAM,SAAAC,GAAK,OAAIC,QAAQC,IAAIF,EAAhB,IAVc,kBAWrB3D,GAXqB,2CAAH,sDAcd8D,EAAc,mCAAG,WAAOC,GAAP,8FAAcrB,EAAd,+BAAqB,EAArB,SACLP,EAASQ,IAAT,gBAA8B,CACnDL,OAAQ,CACNyB,MAAAA,EACArB,KAAAA,KAJwB,uBACpB1C,EADoB,EACpBA,KADoB,kBAQrBA,GARqB,2CAAH,sDAWdgE,EAAe,mCAAG,WAAMnB,GAAN,yFACNV,EAASQ,IAAT,iBAAuBE,EAAvB,aADM,uBACrB7C,EADqB,EACrBA,KADqB,kBAEtBA,GAFsB,2CAAH,sDAKfc,EAAe,mCAAG,WAAM+B,GAAN,yFACNV,EAASQ,IAAT,iBAAuBE,EAAvB,aADM,uBACrB7C,EADqB,EACrBA,KADqB,kBAEtBA,GAFsB,2CAAH,sDAKtBiE,EAAc,mCAAG,WAAOpB,EAAIC,GAAX,yFACEX,EAASQ,IAAT,iBAAuBE,EAAvB,WAAoC,CACzDP,OAAQ,CAAES,SAAUD,KAFD,uBACb9C,EADa,EACbA,KADa,kBAKdA,GALc,2CAAH,wDAQPkE,EAAa,mCAAG,WAAMrB,GAAN,oFACrBsB,EAAKF,EAAepB,EAAI,SACxBK,EAAKe,EAAepB,EAAI,SACxBM,EAAKc,EAAepB,EAAI,SACxBuB,EAAgBhB,QAAQC,IAAI,CAACc,EAAIjB,EAAIC,IACxCG,MAAK,SAAAC,GACJ,IAAMvD,EAAOuD,EAAMC,MAAK,qBAAGzC,QAAsBE,OAAS,CAAlC,IACxB,OAAOjB,EAAOA,EAAKe,QAAQ,GAAGsD,IAAM,EACrC,IACAX,OAAM,SAAAC,GAAK,OAAIC,QAAQC,IAAIF,EAAO,QAAvB,IATa,kBAWpBS,GAXoB,2CAAH,qD","sources":["webpack://goit-react-hw-05-movies/./src/components/page/ReviewsPage/reviews.module.css?131b","components/page/ReviewsPage/Reviews.jsx","components/shared/scrols.js","components/shared/shared.js"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"list\":\"reviews_list__zgFfV\",\"item\":\"reviews_item__yqVN2\",\"title\":\"reviews_title__r-jPj\",\"pretitle\":\"reviews_pretitle__6JtpS\"};","import { useParams } from 'react-router-dom';\nimport { useState, useEffect, useRef } from 'react';\nimport { ToastContainer, toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport { getFilmsReviews } from 'components/shared/shared';\nimport css from './reviews.module.css';\nimport Loader from 'components/shared/Loader/Loader';\nimport { scrols } from 'components/shared/scrols';\nconst Reviews = () => {\n  const [state, setState] = useState({\n    data: [],\n    loader: false,\n  });\n  const [scrol, setScrol] = useState(false);\n  const { movieId } = useParams();\n  const refStart = useRef(null);\n\n  useEffect(() => {\n    if (scrol) scrols(refStart);\n  }, [scrol]);\n\n  useEffect(() => {\n    const fetchFilmsRevievs = async () => {\n      try {\n        setState(prev => ({ ...prev, loader: true }));\n        const { results } = await getFilmsReviews(movieId);\n        setState(prevState => {\n          return { prevState, data: [...results] };\n        });\n        results.length ? setScrol(true) : toast.warning(`No credits!`);\n      } catch (error) {\n        toast.error(\n          ` An error occurred. Go to the main page or repeat the request.`\n        );\n      } finally {\n        setState(prev => ({ ...prev, loader: false }));\n      }\n    };\n    fetchFilmsRevievs();\n  }, [movieId]);\n\n  const item = state.data.map(({ content, author, created_at }, index) => (\n    <li className={css.item} key={index}>\n      <h2 className={css.title}>\n        Author: {author} created {new Date(created_at).toDateString()}{' '}\n      </h2>\n      <p className={css.pretitle}>{content}</p>\n    </li>\n  ));\n  return (\n    <div ref={refStart}>\n      {state.loader && <Loader />}\n      <ToastContainer />\n      <ul className={css.list}>{item}</ul>\n    </div>\n  );\n};\n\nexport default Reviews;\n","export const scrols = ref => {\n  ref.current.scrollIntoView({ block: 'start', behavior: 'smooth' });\n};\n","import axios from 'axios';\n\nconst { REACT_APP_API_KEY } = process.env;\n\nconst instance = axios.create({\n  baseURL: 'https://api.themoviedb.org/3/',\n  params: {\n    api_key: REACT_APP_API_KEY,\n  },\n});\n\nexport const getTraidingFilms = async page => {\n  const { data } = await instance.get('/trending/movie/day');\n  return data;\n};\n\nexport const getFilmsId = async (id, lang = 'en-US') => {\n  const { data } = await instance.get(`/movie/${id}`, {\n    params: { language: lang },\n  });\n\n  return data;\n};\n\nexport const getFilmDetails = async id => {\n  const uk = getFilmsId(id, 'uk-UA');\n  const ru = getFilmsId(id, 'ru-Ru');\n  const en = getFilmsId(id, 'en-US');\n\n  const data = Promise.all([uk, ru, en])\n    .then(value => {\n      const valueLang = value.find(item => item.overview);\n      return valueLang;\n    })\n    .catch(error => console.log(error));\n  return data;\n};\n\nexport const getFilmsSearch = async (query, page = 1) => {\n  const { data } = await instance.get(`/search/movie`, {\n    params: {\n      query,\n      page,\n    },\n  });\n\n  return data;\n};\n\nexport const getFilmsCredits = async id => {\n  const { data } = await instance.get(`/movie/${id}/credits`);\n  return data;\n};\n\nexport const getFilmsReviews = async id => {\n  const { data } = await instance.get(`/movie/${id}/reviews`);\n  return data;\n};\n\nconst getTrailerLang = async (id, lang) => {\n  const { data } = await instance.get(`/movie/${id}/videos`, {\n    params: { language: lang },\n  });\n\n  return data;\n};\n\nexport const getTrailerKey = async id => {\n  const ua = getTrailerLang(id, 'uk-UA');\n  const ru = getTrailerLang(id, 'ru-Ru');\n  const en = getTrailerLang(id, 'en-US');\n  const promisTrailer = Promise.all([ua, ru, en])\n    .then(value => {\n      const data = value.find(({ results }) => results.length > 0);\n      return data ? data.results[0].key : '';\n    })\n    .catch(error => console.log(error, 'error'));\n\n  return promisTrailer;\n};\n"],"names":["useState","data","loader","state","setState","scrol","setScrol","movieId","useParams","refStart","useRef","useEffect","scrols","fetchFilmsRevievs","prev","getFilmsReviews","results","prevState","length","toast","item","map","index","content","author","created_at","className","css","Date","toDateString","ref","Loader","current","scrollIntoView","block","behavior","instance","axios","baseURL","params","api_key","process","getTraidingFilms","page","get","getFilmsId","id","lang","language","getFilmDetails","uk","ru","en","Promise","all","then","value","find","overview","catch","error","console","log","getFilmsSearch","query","getFilmsCredits","getTrailerLang","getTrailerKey","ua","promisTrailer","key"],"sourceRoot":""}